<form action="<?= route('mushrooms.update', ['id' => $mushroom->id]) ?>" method="POST" enctype="multipart/form-data" class="<?= $mushroom->hasErrors() ? 'was-validated' : '' ?>" novalidate>
    <input type="hidden" name="_method" value="PUT">

    <div class="mb-3">
        <label for="scientific_name" class="form-label">Nome Científico</label>
        <input type="text" value="<?= htmlspecialchars($mushroom->scientific_name) ?>" name="mushroom[scientific_name]" class="form-control" id="scientific_name" required>
        <div class="invalid-feedback"><?= $mushroom->errors('scientific_name') ?? '' ?></div>
    </div>

    <div class="mb-3">
        <label class="form-label">Imagem Atual</label><br>
        <?php if ($mushroom->image_url): ?>
            <img src="<?= htmlspecialchars($mushroom->image_url) ?>" alt="<?= htmlspecialchars($mushroom->scientific_name) ?>" class="img-thumbnail mb-2" style="max-width: 200px;">
        <?php else: ?>
            <em>Nenhuma imagem cadastrada.</em>
        <?php endif; ?>
    </div>

    <div class="mb-3">
        <label for="image_file" class="form-label">Nova Imagem (opcional)</label>
        <input type="file" name="image_file" accept="image/*" class="form-control" id="image_file">
        <div class="invalid-feedback"><?= $mushroom->errors('image_url') ?? '' ?></div>
    </div>

    <div class="mb-3">
        <label for="hint" class="form-label">Dica</label>
        <input type="text" value="<?= htmlspecialchars($mushroom->hint) ?>" name="mushroom[hint]" class="form-control" id="hint" required>
        <div class="invalid-feedback"><?= $mushroom->errors('hint') ?? '' ?></div>
    </div>

    <div class="mb-3">
        <label for="description" class="form-label">Descrição</label>
        <textarea name="mushroom[description]" class="form-control" id="description" required><?= htmlspecialchars($mushroom->description) ?></textarea>
        <div class="invalid-feedback"><?= $mushroom->errors('description') ?? '' ?></div>
    </div>

    <button type="submit" class="btn btn-primary">Atualizar</button>
    <a href="/mushrooms" class="btn btn-outline-primary">
        <i data-feather="arrow-left"></i> Voltar
    </a>

    <script>
        feather.replace();
    </script>
</form>